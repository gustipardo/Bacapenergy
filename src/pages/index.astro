---
import "../styles/global.css";
import Layout from "../layouts/Layout.astro";
import Servicios from "../components/Servicios.astro";
import Trabajos from "../components/Trabajos.astro";
---

<Layout title="Bacapenergy - Inicio">
  <main>
    <section
      class="relative min-h-[85vh] h-80 bg-white flex items-center justify-center overflow-hidden"
    >
      <!-- Fondo con patrón de circuitos -->
      <div class="absolute inset-0 opacity-10 z-1">
        <div id="hero-image"
          class="absolute inset-0 bg-[url('/circuit-pattern.svg')] bg-repeat opacity-20"
        >
        </div>
      </div>

      <!-- Contenido principal -->
      <div class="container mx-auto px-4 z-10 pt-8 lg:pt-0">
        <div
          class="flex flex-col lg:flex-row items-center justify-between gap-8 lg:gap-12"
        >
          <!-- Texto -->
          <div class="lg:ml-6 flex-1 text-center lg:text-left max-w-2xl">
            <h1
              id="hero-title"
              class="text-4xl md:text-6xl font-bold text-[#545454] mb-6 leading-tight"
            >
              Certificaciones Elécticas
              <span class="block text-3xl md:text-5xl mt-2"
                >Rápidas y eficientes</span
              >
            </h1>
            <p class="text-lg md:text-xl text-[#545454]/90 mb-8">
              Técnicos e ingenieros especializados
            </p>
            <div
              class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start"
            >
              <a
                href="https://wa.me/5491128262939" target="_blank" rel="noopener noreferrer"
                id="cotizacionBtn"
                class="bg-[#FEC52C] text-[#545454] px-8 py-4 rounded-md text-lg font-semibold hover:bg-[#FEC52C]/90 transition-colors text-center"
              >
                Solicitar Cotización
              </a>
              <a
                href="#servicios-section"
                class="bg-transparent border-2 border-[#FEC52C] text-[#FEC52C] px-8 py-4 rounded-md text-lg font-semibold hover:bg-[#FEC52C] hover:text-[#545454] transition-colors text-center"
              >
                Ver Servicios
              </a>
            </div>
          </div>

          <!-- Imagen -->
          <div class="flex-1 justify-center lg:justify-end lg:mr-6 hidden lg:flex">
            <img
              src="/DCI_Landing.png"
              alt="Capacitor Industrial"
              class="w-full max-w-lg"
              id="heroImage"
            />
          </div>
        </div>
      </div>

      <!-- Elementos decorativos -->
      <div
        class="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-white to-transparent"
      >
      </div>
      <div
        class="absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-white to-transparent"
      >
      </div>
    </section>

    <!-- SEPARADOR ELEGANTE - Opción 1: Gradiente con patrón -->
    <div class="relative py-16 bg-gradient-to-b from-white via-gray-50 to-white overflow-hidden">
      <!-- Patrón de fondo sutil -->
      <div class="absolute inset-0 opacity-5">
        <div class="w-full h-full bg-[url('/circuit-pattern.svg')] bg-repeat-x bg-center"></div>
      </div>
      
      <!-- Línea decorativa central -->
      <div class="relative flex items-center justify-center h-px">
        <div class="flex items-center gap-4">
          <div class="w-48 h-px bg-gradient-to-r from-transparent to-[#FEC52C]"></div>
          <div class="w-3 h-3 rounded-full bg-[#FEC52C] shadow-lg"></div>
          <div class="w-56 h-px bg-gradient-to-r from-[#FEC52C] to-[#545454]"></div>
          <div class="w-3 h-3 rounded-full bg-[#545454] shadow-lg"></div>
          <div class="w-48 h-px bg-gradient-to-l from-transparent to-[#545454]"></div>
        </div>
      </div>
      
    </div>

<section class="bg-white py-16" id="servicios-section">
  <div class="container mx-auto px-4">
    <h2 class="text-4xl md:text-5xl font-bold text-[#545454] text-center mb-12" id="servicios-title">
      Nuestros Servicios
    </h2>

    <div class="space-y-6 max-w-4xl mx-auto">
      
      <!-- Nuevo Suministro -->
      <div class="bg-white border border-gray-200 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow cursor-pointer" id="servicio-suministro">
        <div class="p-6 flex items-center space-x-4">
          <div class="flex-shrink-0 w-12 h-12 bg-black rounded-full flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
          </div>
          <div class="flex-grow">
            <h3 class="text-xl font-bold text-gray-800 mb-2">Nuevo Suministro</h3>
            <p class="text-gray-600">Te conectamos a la red eléctrica lo más rápido posible</p>
          </div>
        </div>
      </div>

      <!-- Cambio de tarifa -->
      <div class="bg-white border border-gray-200 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow cursor-pointer" id="servicio-tarifa">
        <div class="p-6 flex items-center space-x-4">
          <div class="flex-shrink-0 w-12 h-12 bg-black rounded-full flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
            </svg>
          </div>
          <div class="flex-grow">
            <h3 class="text-xl font-bold text-gray-800 mb-2">Cambio de tarifa (T1 - T2 - T3)</h3>
            <p class="text-gray-600">Cambio de tarifa para aumento de potencia y ahorro porcentual.</p>
          </div>
        </div>
      </div>

      <!-- Certificado de puesta a tierra -->
      <div class="bg-white border border-gray-200 rounded-xl overflow-hidden shadow-md cursor-pointer hover:shadow-lg transition-shadow" id="servicio-certificado">
        <div class="p-6 flex items-center space-x-4">
          <div class="flex-shrink-0 w-12 h-12 bg-black rounded-full flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.4 16,13V16C16,17.4 15.4,18 14.8,18H9.2C8.6,18 8,17.4 8,16V13C8,12.4 8.6,11.5 9.2,11.5V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,10V11.5H13.5V10C13.5,8.7 12.8,8.2 12,8.2Z"/>
            </svg>
          </div>
          <div class="flex-grow">
            <h3 class="text-xl font-bold text-gray-800 mb-2">Certificado de puesta a tierra srt 900/2015</h3>
            <p class="text-gray-800">Cumplí con la normativa certificando tu puesta a tierra..</p>
          </div>
        </div>
        
        <div class="opacity-0 h-0 overflow-hidden" id="servicio-certificado-content">
          <div class="px-6 pb-6 border-t border-gray-300">
            <p class="text-gray-700 mt-4">
              Realizamos la certificación completa de tu sistema de puesta a tierra según la normativa SRT 900/2015. 
              Incluye medición, informe técnico y certificado oficial.
            </p>
          </div>
        </div>
      </div>

      <!-- Medidor Bidireccional -->
      <div class="bg-white border border-gray-200 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow cursor-pointer" id="servicio-medidor">
        <div class="p-6 flex items-center space-x-4">
          <div class="flex-shrink-0 w-12 h-12 bg-black rounded-full flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M7,2V13H10V22L17,10H13L17,2H7Z"/>
            </svg>
          </div>
          <div class="flex-grow">
            <h3 class="text-xl font-bold text-gray-800 mb-2">Medidor Bidireccional</h3>
            <p class="text-gray-600">Vendé la energía que te sobra, cambia tu medidor a uno bidireccional.</p>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

  <Trabajos />
  </main>
</Layout>

<script>
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
gsap.registerPlugin(ScrollTrigger);

gsap.from("#hero-title", {
  y: 20,
  opacity: 0,
  duration: 1.5,
  ease: "power2.out",	
});

gsap.from("#hero-second-title", {
  scrollTrigger: {
    trigger: "#hero-second-title",
    start: "top 60%",
    toggleActions: "play none none none",
  },
  y: 20,
  opacity: 0,
  duration: 1.5,
  ease: "power2.out",
});

// Animación del título de servicios
gsap.from("#servicios-title", {
  scrollTrigger: {
    trigger: "#servicios-title",
    start: "top 80%",
    toggleActions: "play none none none",
  },
  y: 30,
  opacity: 0,
  duration: 1,
  ease: "power2.out",
});

// Animación de cada servicio con delay escalonado
gsap.from("#servicio-suministro", {
  scrollTrigger: {
    trigger: "#servicios-section",
    start: "top 70%",
    toggleActions: "play none none none",
  },
  y: 40,
  opacity: 0,
  duration: 0.8,
  delay: 0.2,
  ease: "power2.out",
});

gsap.from("#servicio-tarifa", {
  scrollTrigger: {
    trigger: "#servicios-section",
    start: "top 70%",
    toggleActions: "play none none none",
  },
  y: 40,
  opacity: 0,
  duration: 0.8,
  delay: 0.4,
  ease: "power2.out",
});

gsap.from("#servicio-certificado", {
  scrollTrigger: {
    trigger: "#servicios-section",
    start: "top 70%",
    toggleActions: "play none none none",
  },
  y: 40,
  opacity: 0,
  duration: 0.8,
  delay: 0.6,
  ease: "power2.out",
});

gsap.from("#servicio-medidor", {
  scrollTrigger: {
    trigger: "#servicios-section",
    start: "top 70%",
    toggleActions: "play none none none",
  },
  y: 40,
  opacity: 0,
  duration: 0.8,
  delay: 0.8,
  ease: "power2.out",
});

// Sistema de destacado secuencial basado en scroll
const servicios = [
  { id: "#servicio-suministro", progress: 0.2 },
  { id: "#servicio-tarifa", progress: 0.4 },
  { id: "#servicio-certificado", progress: 0.6 },
  { id: "#servicio-medidor", progress: 0.8 }
];

// ScrollTrigger para el destacado secuencial
ScrollTrigger.create({
  trigger: "#servicios-section",
  start: "top 60%",
  end: "bottom 40%",
  scrub: true,
  onUpdate: (self) => {
    const progress = self.progress;
    
    servicios.forEach((servicio, index) => {
      const elemento = document.querySelector(servicio.id);
      
      if (progress >= servicio.progress - 0.15 && progress <= servicio.progress + 0.15) {
        // Destacar este servicio
        gsap.to(elemento, {
          backgroundColor: "#facc15", // yellow-400
          duration: 0.5,
          ease: "power2.out"
        });
        
        // Escalar ligeramente
        gsap.to(elemento, {
          scale: 1.02,
          duration: 0.5,
          ease: "power2.out"
        });
      } else {
        // Volver al estado normal
        gsap.to(elemento, {
          backgroundColor: "#ffffff", // blanco
          duration: 0.5,
          ease: "power2.out"
        });
        
        gsap.to(elemento, {
          scale: 1,
          duration: 0.5,
          ease: "power2.out"
        });
      }
    });
  }
});

// Animación de hover adicional (opcional)
servicios.forEach(servicio => {
  const elemento = document.querySelector(servicio.id);
  
  elemento.addEventListener('mouseenter', () => {
    gsap.to(elemento, {
      scale: 1.05,
      duration: 0.3,
      ease: "power2.out"
    });
  });

  elemento.addEventListener('mouseleave', () => {
    // Solo volver a escala 1 si no está siendo destacado por scroll
    const currentBg = window.getComputedStyle(elemento).backgroundColor;
    const isHighlighted = currentBg === "rgb(250, 204, 21)"; // yellow-400 en RGB
    
    gsap.to(elemento, {
      scale: isHighlighted ? 1.02 : 1,
      duration: 0.3,
      ease: "power2.out"
    });
  });
});
</script>
